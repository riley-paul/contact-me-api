---
import AlertSystem from "@/components/alert-system/alert-system";
import AppSidebar from "@/components/app-sidebar";
import { getUser, getProjects } from "@/lib/server/helpers";
import { Separator, Heading } from "@radix-ui/themes";
import Logo from "@/components/logo";
import { ACCENT_COLOR } from "@/lib/client/constants";
import UserAvatar from "@/components/user-avatar";

const user = await getUser(Astro);
if (!user) return Astro.redirect("/welcome");

const projects = await getProjects(Astro);

export interface Props {
  title?: string;
}

const { title } = Astro.props;
---

<main class="flex h-[100dvh]">
  <article class="flex-1 flex flex-col">
    <header class="shrink-0 container2">
      <div class="flex items-center justify-between h-20">
        <Logo />
        <UserAvatar user={user} client:load />
      </div>
      <Separator size="4" color={ACCENT_COLOR} />
    </header>

    <section class="container2 py-4"><slot /></section>
  </article>
</main>
